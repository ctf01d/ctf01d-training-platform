<div id="<%= dom_id game %>" class="card game-card">
  <div class="game-card__body">
    <div class="game-card__left">
      <div class="game-card__meta">
        <div class="game-card__title-row">
          <strong class="game-card__title"><%= link_to game.name, game %></strong>
          <% st = game.status %>
          <% if st == :ongoing %>
            <span class="badge badge--green game-card__badge">–∏–¥—ë—Ç</span>
          <% elsif st == :upcoming %>
            <span class="badge badge--blue game-card__badge">—Å–∫–æ—Ä–æ</span>
          <% elsif st == :past %>
            <span class="badge badge--gray game-card__badge">–ø—Ä–æ—à–ª–∞</span>
          <% end %>
        </div>

        <% if game.organizer.present? || game.site_url.present? || game.ctftime_url.present? %>
          <div class="game-card__sub muted">
            <% if game.organizer.present? %>
              <span><%= game.organizer %></span>
            <% end %>
            <% if game.site_url.present? %>
              <span>‚Ä¢ <%= link_to '–°–∞–π—Ç', game.site_url, target: '_blank', rel: 'noopener' %></span>
            <% end %>
            <% if game.ctftime_url.present? %>
              <span>‚Ä¢ <%= link_to 'CTFtime', game.ctftime_url, target: '_blank', rel: 'noopener' %></span>
            <% end %>
          </div>
        <% end %>

        <div class="game-card__row">
          <div class="game-card__label">–ü–µ—Ä–∏–æ–¥</div>
          <div class="game-card__value">
            <span class="game-card__icon">üïí</span>
            <div><%= game.starts_at %> ‚Äî <%= game.ends_at %></div>
          </div>
        </div>

        <div class="game-card__row">
          <div class="game-card__label">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
          <div class="game-card__value">
            <% case game.registration_status
               when :open %>
                 <span class="badge badge--green">–æ—Ç–∫—Ä—ã—Ç–∞</span>
            <%   when :upcoming %>
                 <span class="badge badge--blue">—Å–∫–æ—Ä–æ</span>
            <%   when :closed %>
                 <span class="badge badge--gray">–∑–∞–∫—Ä—ã—Ç–∞</span>
            <%   else %>
                 <span class="badge badge--gray">–Ω–µ –∑–∞–¥–∞–Ω–æ</span>
            <% end %>
            <% if game.registration_opens_at || game.registration_closes_at %>
              <span class="muted game-card__dates">
                <%= game.registration_opens_at || '‚Äî' %> ‚Äî <%= game.registration_closes_at || '‚Äî' %>
              </span>
            <% end %>
          </div>
        </div>

        <div class="game-card__row">
          <div class="game-card__label">–¢–∞–±–ª–æ</div>
          <div class="game-card__value">
            <% case game.scoreboard_status
               when :open, :always %>
                 <span class="badge badge--green">–æ—Ç–∫—Ä—ã—Ç</span>
            <%   when :upcoming %>
                 <span class="badge badge--blue">—Å–∫–æ—Ä–æ</span>
            <%   when :closed %>
                 <span class="badge badge--gray">–∑–∞–∫—Ä—ã—Ç</span>
            <% end %>
            <% if game.scoreboard_opens_at || game.scoreboard_closes_at %>
              <span class="muted game-card__dates">
                <%= game.scoreboard_opens_at || '‚Äî' %> ‚Äî <%= game.scoreboard_closes_at || '‚Äî' %>
              </span>
            <% end %>
          </div>
        </div>

        <% if game.services.any? %>
          <div class="game-card__services">
            <strong>–°–µ—Ä–≤–∏—Å—ã (<%= game.services.count %>):</strong>
            <span class="game-card__services-list">
              <%= game.services.order(:name).map { |s| link_to s.name, s }.join(' ‚Ä¢ ').html_safe %>
            </span>
          </div>
        <% end %>
      </div>
    </div>

    <div class="game-card__right">
      <%= avatar_image_tag(game.name, url: game.avatar_url, size: 220, class_name: 'game-card__logo-img') %>
    </div>
  </div>

  <% if game.vpn_url.present? || game.vpn_config_url.present? || game.access_secret.present? %>
    <div class="game-card__access" style="margin-top:12px;">
      <% if game.vpn_url.present? %>
        <div><strong>VPN:</strong> <%= link_to game.vpn_url, game.vpn_url, target: '_blank', rel: 'noopener' %></div>
      <% end %>
      <% if game.vpn_config_url.present? %>
        <div><strong>Config:</strong> <%= link_to game.vpn_config_url, game.vpn_config_url, target: '_blank', rel: 'noopener' %></div>
      <% end %>
      <% if game.access_secret.present? %>
        <div><strong>–°–µ–∫—Ä–µ—Ç:</strong> <code><%= game.access_secret %></code></div>
      <% end %>
    </div>
  <% end %>
</div>
